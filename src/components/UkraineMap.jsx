import React, { useState } from "react";

// --- Data, Components, and Utilities for the Map ---

/**
 * Mock data structure for Ukraine regions.
 * NOTE: The 'd' values are placeholders and must be replaced with actual SVG path data.
 */
const BASE_REGION_COLOR = "#0066CC"; // The requested blue color
const HOVER_REGION_COLOR = "#FBBF24"; // Tailwind yellow-400 for hover

const UKRAINE_REGIONS_DATA = [
  {
    id: "cherniveczka-oblast",
    name: "Cherniveczka Oblast",
    d: "M336 358L338 355L343 361L345 361L350 357L351 364L353 364L352 360L356 365L369 365L373 370L375 370L376 367L379 368L380 367L375 364L376 363L380 365L380 362L381 361L382 364L383 360L385 360L386 364L388 364L390 362L405 362L403 359L409 360L410 358L413 360L416 369L412 373L407 372L402 377L395 374L394 377L390 377L386 374L383 377L382 382L379 379L374 384L361 387L360 395L355 402L346 404L344 403L336 406L314 408L305 419L299 421L301 411L298 402L301 395L308 389L309 385L315 378L322 374L328 374L329 366L327 359L329 356L331 355L334 356L335 358z",
    schools: 0,
    students: 0,
  },
  // Region 2: West (Placeholder for Lviv/Volyn/Rivne area)
  //   {
  //     id: "region-west",
  //     name: "region-west",
  //     d: "M756 550L772 576L779 581L789 578L795 569L795 572L800 576L805 574L805 572L808 570L815 569L817 571L818 570L821 572L824 571L826 573L830 573L831 578L825 577L825 580L822 582L821 585L821 591L823 595L815 597L813 599L806 597L802 600L795 600L793 596L786 592L780 592L775 596L775 598L777 599L773 601L774 603L769 602L768 605L763 608L761 613L759 613L757 610L749 612L746 611L734 616L727 628L720 632L716 637L709 639L700 638L695 637L693 632L689 632L683 628L683 626L691 624L689 623L691 620L689 614L690 611L694 608L694 602L690 592L685 588L680 588L678 590L668 581L661 577L654 576L651 579L647 579L642 574L644 570L657 563L658 560L673 552L674 549L678 551L688 544L696 544L697 540L698 541L701 539L695 538L694 520L700 523L702 521L706 522L714 528L715 527L719 530L726 531L734 539L737 535L739 535L746 541L748 541L748 547L755 551z",
  //     schools: 15,
  //     students: 500,
  //   },
  {
    id: "dnipropetrovska-oblast",
    name: "Dnipropetrovska Oblast",
    d: "M756 321L766 323L778 334L783 334L792 337L800 334L803 339L803 341L801 342L806 344L806 346L810 349L808 352L815 357L816 365L818 365L824 357L829 360L835 358L838 360L836 365L838 365L839 362L842 361L843 365L841 367L841 372L839 373L839 379L844 382L845 387L842 390L843 397L841 399L836 398L836 396L833 395L829 396L828 401L831 405L831 407L827 407L829 412L819 412L815 414L812 413L812 411L807 413L805 411L808 405L805 405L805 401L803 401L805 399L804 398L801 400L800 395L795 397L788 393L784 393L781 396L768 392L758 393L752 396L751 393L749 394L749 400L750 403L753 404L753 406L750 406L748 409L752 413L752 417L754 419L752 428L754 431L753 434L738 431L721 437L707 434L696 436L692 434L692 430L680 435L678 432L666 429L665 428L667 424L665 422L670 420L670 408L667 407L669 399L672 396L676 395L677 390L678 394L682 389L683 390L689 385L690 382L686 366L703 356L693 352L691 349L692 347L693 348L696 346L698 348L700 346L703 349L708 342L722 350L726 344L724 340L725 335L728 334L727 333L730 327L741 324L747 320L751 321L751 323L755 320z",
    schools: 14,
    students: 479,
  },
  {
    id: "doneczka-oblast",
    name: "Doneczka Oblast",
    d: "M892 324L894 322L897 323L895 328L897 332L894 335L896 337L903 338L906 344L907 352L905 355L905 364L908 366L907 370L910 372L911 371L915 376L915 378L912 379L912 381L914 383L919 382L921 389L928 392L931 395L930 398L933 400L940 401L941 410L931 412L926 423L919 427L908 429L905 436L905 442L902 447L902 449L907 449L907 452L904 454L902 458L903 462L900 466L898 467L899 465L897 462L887 462L882 464L874 463L870 466L863 477L860 473L850 477L848 474L851 471L853 471L853 466L850 466L842 456L845 454L845 448L851 449L852 444L855 445L858 439L853 438L845 430L843 432L839 428L837 428L832 416L829 415L827 409L827 407L831 407L831 405L828 402L829 397L832 395L840 399L842 398L842 391L845 387L844 381L839 380L839 373L841 372L840 369L843 363L840 362L839 365L836 364L838 361L835 358L834 347L840 348L843 346L848 349L848 347L851 346L851 344L856 345L860 338L862 338L861 335L864 332L864 330L876 322L872 320L872 317L888 317L890 319L888 321L892 323z",
    schools: 114,
    students: 390,
  },
  {
    id: "ivano-frankivska-oblast",
    name: "Ivano-Frankivska Oblast",
    d: "M286 298L288 298L294 308L294 314L296 316L295 324L301 325L301 329L297 329L302 335L304 334L307 336L310 342L312 337L312 344L313 342L317 344L313 345L313 348L317 345L318 346L318 344L322 342L324 346L331 350L331 355L328 357L329 374L322 374L315 378L304 393L301 395L299 400L301 413L299 420L297 421L294 416L287 412L286 408L282 406L285 398L280 391L280 385L276 380L270 375L268 377L263 376L262 365L252 369L252 365L246 360L246 358L241 357L239 353L235 352L237 344L237 335L240 332L243 325L256 325L259 323L276 320L277 319L275 316L273 316L273 313L269 312L273 310L275 307L275 298L282 296L286 298z",
    schools: 0,
    students: 6,
  },
  {
    id: "harkivska-oblast",
    name: "Harkivska Oblast",
    d: "M893 270L894 269L897 274L893 276L895 277L894 280L891 281L891 283L893 283L893 287L891 291L892 296L887 303L888 311L890 311L888 316L885 318L873 317L871 320L874 320L876 322L865 329L864 332L862 332L862 337L856 342L855 345L849 345L849 349L843 346L840 348L834 347L835 358L829 360L825 357L819 363L819 365L815 365L815 357L808 351L810 350L809 348L805 344L801 343L803 340L799 334L794 337L778 334L773 331L765 322L756 321L755 314L759 310L761 312L769 311L773 305L771 299L776 299L778 297L775 294L779 294L776 286L770 285L766 281L766 275L764 273L752 269L750 263L753 259L753 253L756 249L759 250L758 249L760 247L761 248L763 245L768 246L768 244L771 243L771 241L774 242L775 239L779 241L784 239L787 240L795 232L807 233L815 243L822 241L827 244L828 248L830 248L833 244L844 238L850 239L857 237L862 232L867 232L870 238L875 242L875 249L881 257L890 262L893 269z",
    schools: 101,
    students: 743,
  },
  {
    id: "hersonska-oblast",
    name: "Hersonska Oblast",
    d: "M649 531L664 531L668 532L668 534L649 530zM759 529L756 529L759 526L766 523L769 518L766 524L760 528zM627 525L601 518L598 511L601 517L603 518L624 523zM681 435L688 433L688 431L691 430L693 432L692 433L696 436L706 434L721 437L726 451L731 448L735 448L733 450L734 460L736 462L739 472L744 473L748 479L745 482L745 484L742 487L740 487L740 489L745 492L744 495L747 499L750 499L751 502L758 504L760 515L762 515L758 518L753 518L748 524L751 540L756 550L755 551L748 547L748 541L746 541L741 536L737 535L734 539L730 536L730 534L727 531L711 527L706 522L702 521L700 522L694 520L695 526L692 525L690 527L691 529L689 530L689 532L685 531L682 528L680 529L679 526L676 526L677 520L674 525L671 526L667 524L667 526L656 526L643 530L634 527L631 523L633 521L629 522L623 517L621 518L615 514L615 516L610 515L611 512L619 512L623 508L621 505L616 505L612 503L614 500L637 504L640 502L639 501L643 496L646 496L650 492L636 498L632 495L627 498L625 494L621 493L619 488L622 486L628 486L632 481L637 482L638 479L644 480L645 477L652 480L658 480L663 478L659 478L657 476L666 473L667 472L664 472L664 470L665 469L667 471L669 468L666 465L662 464L662 462L665 457L672 454L672 446L670 443L667 442L668 438L670 441L672 441L670 430L678 432L681 435z",
    schools: 73,
    students: 301,
  },
  {
    id: "hmelnyczka-oblast",
    name: "Hmelnyczka Oblast",
    d: "M402 224L407 229L404 231L403 236L406 236L406 238L411 241L411 243L416 247L418 247L419 244L421 246L421 256L423 261L418 262L419 265L417 269L420 270L423 277L432 279L431 283L427 284L427 286L430 288L428 292L429 295L426 296L426 301L431 304L429 307L433 313L433 322L428 324L422 322L420 322L419 324L415 324L413 330L410 333L412 349L410 358L408 360L404 359L404 362L389 362L388 364L386 364L385 360L383 360L382 364L381 361L380 365L377 363L375 364L380 367L376 367L376 370L374 370L370 365L365 366L363 363L364 362L361 359L362 358L358 355L359 346L357 344L357 339L356 340L356 330L358 328L356 320L359 313L358 305L356 304L354 296L359 286L357 285L358 277L356 276L356 272L354 270L354 264L358 263L356 261L358 259L357 257L360 255L357 253L365 245L369 245L380 233L380 231L384 229L384 227L388 225L391 226L397 221L399 221L399 223z",
    schools: 0,
    students: 111,
  },
  {
    id: "kirovogradska-oblast",
    name: "Kirovogradska Oblast",
    d: "M683 337L684 336L691 339L695 339L696 342L697 339L700 338L708 342L703 349L700 346L698 348L696 346L694 348L691 348L691 350L703 355L699 359L686 365L690 382L689 385L684 390L681 389L678 394L677 390L676 395L671 397L668 400L667 404L665 398L660 400L661 401L658 404L656 402L653 403L651 405L653 407L650 409L650 415L642 416L633 413L628 418L626 418L622 414L614 415L614 408L612 405L609 404L607 400L610 398L609 395L603 393L600 396L599 395L598 398L598 394L586 393L582 387L578 386L571 391L569 389L561 389L558 391L545 390L545 392L533 392L529 386L526 386L524 389L520 387L518 383L519 378L524 372L526 372L526 376L533 370L537 368L540 369L547 365L548 362L555 363L556 360L554 359L557 356L557 352L561 349L572 349L577 351L596 350L600 338L604 338L606 336L612 338L614 342L621 338L626 339L626 335L635 326L638 330L641 329L644 338L646 336L649 337L652 334L656 335L659 333L655 321L656 314L668 320L675 327L679 328L681 330L680 333L683 337z",
    schools: 0,
    students: 15,
  },
  {
    id: "luganska-oblast",
    name: "Luganska Oblast",
    d: "M905 258L907 258L909 263L914 266L924 265L927 271L934 273L936 276L940 276L946 271L951 281L954 282L959 280L964 282L967 290L975 295L981 293L984 290L990 291L990 294L986 301L992 309L991 316L982 324L980 330L978 329L971 331L970 335L973 338L973 340L980 341L982 343L985 340L987 342L983 347L976 345L974 346L971 350L968 359L968 361L976 361L978 363L979 366L977 368L981 375L976 380L979 382L983 381L984 383L977 393L977 398L974 399L975 409L972 414L954 412L943 413L941 411L940 402L933 400L930 397L931 394L922 390L919 382L914 383L912 381L912 379L915 379L914 375L911 371L910 372L907 370L908 367L905 364L905 354L907 353L907 346L901 337L896 337L894 335L897 332L895 328L897 323L894 322L892 324L888 321L890 319L886 317L890 313L890 311L888 311L887 303L892 296L891 292L893 283L891 283L891 281L894 280L895 277L893 276L897 274L894 269L901 267L902 258z",
    schools: 23,
    students: 183,
  },
  {
    id: "lvivska-oblast",
    name: "Lvivska Oblast",
    d: "M268 222L272 219L277 224L278 223L281 226L277 228L277 230L279 231L280 234L281 231L285 233L288 236L288 238L299 237L305 239L306 243L311 242L311 246L309 247L311 250L310 253L315 260L319 262L322 266L318 272L306 275L305 278L307 282L303 283L300 289L290 293L288 298L283 296L275 298L276 301L274 304L276 307L269 312L273 312L273 316L277 318L275 320L259 323L256 325L243 325L237 335L235 352L231 352L228 351L227 348L225 350L224 348L220 348L216 342L211 343L206 338L204 327L198 321L196 321L199 314L198 305L196 303L196 299L194 296L215 266L241 239L241 237L243 235L255 234L257 228L261 225L260 219L262 217L264 217L264 219L268 221z",
    schools: 0,
    students: 26,
  },
  {
    id: "mykolayivska-oblast",
    name: "Mykolayivska Oblast",
    d: "M601 499L609 498L613 500L612 503L608 502L606 504L606 507L598 496L599 497zM585 391L585 393L590 394L598 393L598 398L599 395L600 396L603 393L609 395L610 398L607 400L609 404L612 405L614 408L614 415L621 414L625 418L629 417L630 414L633 413L641 416L649 415L651 411L650 408L653 408L653 406L651 405L655 402L658 404L661 401L661 399L665 398L668 405L667 406L670 409L670 420L665 421L667 424L665 428L670 430L672 436L672 441L670 441L669 438L667 441L672 446L672 455L667 457L665 456L662 461L663 464L669 467L667 470L664 470L664 472L667 473L657 477L662 478L658 480L653 480L646 477L644 480L638 479L637 482L632 481L627 486L619 487L617 482L621 474L618 472L618 467L614 467L616 462L613 459L613 457L609 454L609 452L608 453L609 455L612 456L612 460L614 462L613 468L618 469L616 471L616 474L619 474L618 478L614 482L616 486L616 491L612 494L606 492L603 492L601 494L597 493L603 481L602 480L602 482L598 486L595 482L595 484L598 487L593 494L588 495L583 493L582 481L576 473L581 470L585 470L589 463L585 458L580 457L580 455L583 452L582 451L577 452L570 449L567 440L569 432L565 429L565 427L562 427L561 429L557 426L551 427L548 425L548 416L544 413L543 405L541 402L539 402L539 397L544 395L543 392L545 392L545 390L557 391L561 389L569 389L571 391L577 386L583 387L583 389L585 390z",
    schools: 33,
    students: 265,
  },
  {
    id: "sumska-oblast",
    name: "Sumska Oblast",
    d: "M723 127L725 127L728 131L730 137L728 140L715 142L715 144L718 146L722 154L720 162L723 165L725 164L724 169L720 173L724 175L728 172L738 174L742 179L749 178L754 175L760 176L763 187L773 188L773 190L770 192L770 196L772 196L774 206L777 208L778 215L774 217L776 227L777 229L782 231L784 237L788 239L787 240L784 239L779 240L780 241L776 239L775 242L772 241L768 243L768 245L764 245L759 248L759 250L756 249L753 252L748 251L742 254L733 255L732 252L734 248L730 243L728 243L729 238L723 232L723 225L721 224L718 225L716 228L705 225L702 227L704 228L703 229L699 230L680 224L669 224L671 218L670 215L673 211L671 204L674 199L673 192L675 188L674 187L673 189L670 189L668 185L667 186L663 184L665 181L664 178L667 177L669 173L669 169L666 162L671 164L671 154L674 154L672 144L673 141L670 138L669 131L674 125L683 122L683 114L686 115L688 113L688 111L681 107L680 102L682 100L684 92L685 93L688 91L689 97L693 93L701 91L714 105L714 116L716 120L722 125L722 127z",
    schools: 22,
    students: 239,
  },
  {
    id: "ternopilska-oblast",
    name: "Ternopilska Oblast",
    d: "M355 245L358 244L356 248L358 250L357 253L360 254L359 256L357 256L358 258L356 261L358 263L354 265L354 270L358 278L357 284L359 287L354 296L359 312L356 320L358 327L356 330L356 340L357 339L357 343L359 346L358 355L361 358L362 357L361 359L364 362L363 363L365 366L356 365L354 364L353 360L353 363L350 363L350 357L345 361L341 360L338 355L335 358L335 356L331 355L330 349L324 346L322 342L319 343L318 346L317 345L314 348L313 346L317 344L314 342L312 344L313 337L310 339L309 342L307 339L308 337L304 334L302 335L300 331L297 329L300 329L301 326L295 324L296 315L294 314L294 308L288 298L290 293L299 289L303 283L307 281L305 278L306 276L320 271L319 268L322 267L319 261L323 255L322 251L328 253L329 251L330 252L333 250L339 250L345 244L354 245z",
    schools: 0,
    students: 1,
  },
  {
    id: "volynska-oblast",
    name: "Volynska Oblast",
    d: "M327 124L332 126L330 128L331 131L325 139L325 146L327 146L329 149L327 152L327 165L329 167L329 165L331 164L333 165L335 163L339 163L339 168L350 178L350 180L345 183L345 185L350 187L352 192L346 195L348 197L348 199L346 200L347 203L341 206L341 214L339 218L332 212L329 212L323 216L318 214L319 219L315 219L316 222L314 224L309 223L307 225L309 226L309 228L306 229L311 235L305 242L304 238L299 236L299 238L289 238L281 231L280 234L279 231L277 230L277 228L281 227L278 223L277 224L273 219L268 222L263 217L261 218L259 211L257 211L257 208L254 206L256 203L261 203L263 201L255 196L254 191L252 191L252 186L250 184L251 181L246 177L239 167L243 162L240 158L241 156L238 154L238 146L244 144L251 146L254 149L269 137L273 127L288 127L306 122L318 124z",
    schools: 0,
    students: 6,
  },
  // Region 3: South (Placeholder for Odesa/Kherson/Crimea area)
  {
    id: "zakarpatska-oblast",
    name: "Zakarpatska Oblast",
    d: "M195 330L199 329L203 333L205 332L207 339L211 343L216 342L220 348L224 348L226 350L226 348L231 352L233 351L239 353L241 357L245 357L246 360L252 364L253 369L261 365L263 366L262 372L264 377L268 377L270 375L279 383L281 387L280 391L285 397L282 405L274 405L272 407L267 408L257 404L251 406L246 402L227 402L222 396L218 395L215 396L212 402L207 401L206 405L203 403L204 398L202 395L199 393L193 395L191 389L187 385L181 385L179 377L177 377L178 374L172 374L171 364L176 357L179 356L182 343L186 335L189 333L190 328L191 327L195 330z",
    schools: 0,
    students: 5,
  },
  // Region 4: East (Placeholder for Kharkiv/Donetsk/Luhansk area)
  {
    id: "zaporizka-oblast",
    name: "Zaporizka Oblast",
    d: "M780 396L782 396L784 393L788 393L794 397L800 395L801 400L804 398L805 399L803 401L805 401L805 405L808 405L807 410L805 410L807 412L812 411L812 413L815 414L819 412L829 412L829 415L832 416L836 424L836 428L839 428L843 432L845 430L853 438L858 439L856 445L855 446L855 444L853 444L851 448L845 449L845 454L841 456L847 461L850 466L851 465L853 467L853 470L848 474L850 477L841 482L842 484L839 492L836 492L838 492L839 488L834 483L822 486L816 491L815 495L811 491L799 492L792 495L786 502L780 505L774 511L770 518L773 511L771 513L769 512L770 506L768 506L765 501L764 502L767 508L762 515L760 515L758 505L751 502L750 499L746 499L744 495L745 492L741 490L740 487L742 487L748 479L745 476L745 474L739 472L737 468L736 462L734 460L734 448L731 448L726 451L721 437L738 431L752 434L753 433L753 413L748 409L753 405L748 400L750 397L750 393L751 396L754 396L758 393L768 392L780 396z",
    schools: 0,
    students: 147,
  },
  // Region 5: Center (Placeholder for Dnipro/Kirovohrad/Poltava area)
  {
    id: "m-kyyiv",
    name: "Kyyiv",
    d: "M540 232L545 231L549 235L549 237L551 237L551 239L554 240L554 244L556 244L556 246L559 247L557 243L559 243L559 241L557 239L559 239L558 238L560 236L562 238L562 236L566 234L567 235L567 233L563 229L563 227L567 223L562 220L562 222L559 223L559 225L552 224L552 222L549 221L543 222L544 223L541 226L542 227L540 232z",
    schools: 0,
    students: 238,
  },
  {
    id: "kyyivska-oblast",
    name: "Kyyivska Oblast",
    d: "M496 172L498 181L499 182L500 179L507 186L505 189L505 193L504 192L503 195L508 200L508 204L506 204L508 206L505 207L509 207L511 211L504 218L507 221L505 225L507 229L504 230L507 231L504 234L510 233L510 235L512 237L513 236L512 238L515 241L514 244L516 246L513 249L515 251L513 255L516 258L514 260L516 262L515 263L517 267L512 271L514 271L511 274L507 274L504 277L504 283L506 283L508 289L506 291L510 297L509 300L511 302L507 306L507 308L511 310L512 315L516 315L519 320L523 320L526 317L527 312L530 311L531 309L534 314L534 312L538 310L538 314L544 314L546 316L548 310L551 307L553 310L557 307L562 310L569 307L570 308L572 304L575 303L577 299L579 299L579 295L582 294L581 291L585 284L585 278L583 277L585 275L584 274L592 269L590 267L591 266L588 265L590 263L595 264L594 267L598 273L602 269L604 273L608 273L613 265L617 265L616 262L619 259L616 258L616 256L619 253L617 251L619 252L619 250L625 246L624 242L627 240L628 236L624 236L625 233L622 234L619 228L621 228L623 224L619 224L614 218L612 218L609 223L606 222L603 225L597 225L595 227L591 225L590 227L588 224L586 224L586 222L582 221L582 219L585 218L585 213L580 208L581 207L573 209L567 209L569 207L563 207L565 201L562 198L560 198L559 193L556 189L552 189L552 175L555 174L553 171L547 168L545 165L545 160L538 154L534 156L530 154L530 156L527 157L526 155L524 159L520 159L517 156L517 152L510 157L509 156L506 162L503 161L500 164L501 163L502 166L500 168L501 169L496 172zM540 232L543 223L545 223L544 222L549 221L552 222L552 224L559 225L559 223L561 223L562 220L567 223L563 227L567 235L566 234L562 236L562 238L560 236L558 238L559 239L557 239L560 243L557 244L559 246L556 247L556 245L553 242L554 241L549 236L549 234L546 233L545 230L540 232zM544 228L544 227zM559 153L565 153L563 151L559 153z",
    schools: 15,
    students: 235,
  },
  {
    id: "cherkaska-oblast",
    name: "Cherkaska Oblast",
    d: "M624 246L630 252L633 252L631 254L632 258L635 259L639 265L639 270L637 270L637 272L640 276L646 279L646 283L652 286L655 292L651 299L656 309L655 320L659 332L656 335L651 334L649 336L645 336L645 338L641 332L641 329L638 330L636 326L626 335L626 339L621 338L614 342L612 338L606 336L604 338L600 338L596 349L590 352L588 350L578 351L572 349L562 349L557 352L557 356L554 359L556 362L555 363L548 362L547 365L540 369L537 368L535 370L528 370L527 369L530 366L530 364L527 357L523 353L524 351L522 349L519 349L518 344L516 343L517 340L513 336L514 332L511 331L511 329L515 326L514 325L516 323L515 318L518 318L517 319L519 321L523 321L527 314L534 313L534 311L536 310L538 310L537 312L546 316L550 308L552 310L556 310L558 308L562 310L566 308L571 309L572 304L582 294L581 289L583 286L584 274L594 269L597 274L599 272L600 273L601 270L607 273L615 260L614 255L620 251L619 246L624 246z",
    schools: 0,
    students: 54,
  },
  {
    id: "odeska-oblast",
    name: "Odeska Oblast",
    d: "M521 560L517 561L523 558L535 547L525 557zM527 387L529 386L533 392L543 392L544 395L539 396L539 401L543 404L544 412L548 416L547 419L549 426L556 426L560 427L561 429L565 426L565 428L569 432L567 440L570 449L576 452L582 450L583 453L580 456L586 459L587 462L589 462L587 469L582 471L581 470L576 473L577 476L582 480L583 493L571 496L564 500L565 508L562 512L559 512L561 514L552 529L536 547L535 542L534 547L528 545L527 550L526 548L527 547L526 553L524 550L521 551L520 554L523 556L517 560L515 549L513 547L513 553L511 555L511 564L516 563L511 569L513 571L516 570L516 572L517 569L518 570L518 581L515 586L513 577L510 574L499 571L494 572L490 576L487 576L484 579L482 579L481 582L479 580L474 579L474 585L465 584L453 579L451 572L447 570L451 566L461 566L463 562L460 557L461 555L464 553L465 550L468 550L469 547L472 545L472 538L481 535L481 529L485 523L481 518L480 506L491 499L493 500L493 511L497 508L498 504L500 507L504 503L506 503L505 506L508 507L511 511L513 511L513 507L515 507L516 504L522 512L525 510L531 511L535 507L533 507L529 502L525 500L525 498L527 498L526 482L524 482L522 478L518 478L509 472L511 465L510 463L508 463L507 465L506 462L509 458L508 454L510 452L510 448L506 446L505 449L502 450L500 445L494 439L491 439L489 433L493 425L493 420L495 418L492 416L495 410L491 408L490 403L488 403L485 406L478 403L478 401L486 395L487 391L495 396L504 394L515 395L515 389L519 387L523 389L526 386L527 387z",
    schools: 0,
    students: 115,
  },
  {
    id: "vinniczka-oblast",
    name: "Vinniczka Oblast",
    d: "M485 292L495 292L503 287L507 289L506 293L510 296L508 298L510 303L507 305L507 309L511 311L513 315L516 317L516 323L514 325L515 326L511 329L511 331L514 332L515 334L513 335L517 340L516 343L518 343L519 348L523 349L523 354L527 356L527 359L530 364L530 366L527 369L533 370L526 376L526 372L524 372L521 375L517 383L520 384L520 386L514 389L516 393L515 395L505 394L495 396L488 391L486 392L486 395L478 401L476 399L475 394L462 391L460 397L457 393L458 390L456 390L453 393L455 388L454 385L449 387L447 387L446 384L442 385L442 380L435 378L429 371L421 370L420 368L416 369L413 360L410 358L412 348L410 333L413 330L415 324L419 324L420 322L422 322L428 325L429 323L433 322L433 314L429 307L431 303L428 303L426 301L426 297L430 289L430 287L427 286L427 284L429 284L432 279L455 279L457 276L471 277L472 274L476 271L479 271L481 274L481 278L484 281L481 285L484 291z",
    schools: 0,
    students: 9,
  },
  {
    id: "poltavska-oblast",
    name: "Poltavska Oblast",
    d: "M699 230L703 229L705 225L714 229L715 227L716 228L719 225L723 224L723 232L729 238L728 243L730 243L734 248L732 252L733 255L742 254L747 251L753 252L753 259L750 262L751 267L754 270L764 273L766 275L766 281L772 286L776 285L779 294L775 294L778 297L776 299L773 298L771 300L773 305L769 311L761 312L759 310L755 314L756 320L754 320L751 323L751 321L747 320L741 324L731 327L724 337L726 343L724 346L725 347L722 350L701 338L697 339L696 342L696 340L693 338L690 339L685 336L684 337L680 333L680 331L682 330L679 328L675 328L673 324L668 320L656 314L656 309L651 300L655 292L652 289L652 286L646 283L646 279L640 276L637 272L637 270L639 270L639 264L635 259L632 258L631 255L633 251L629 251L624 246L627 238L631 238L637 233L639 235L643 234L644 237L660 235L661 232L669 224L675 226L680 224L699 230z",
    schools: 0,
    students: 33,
  },
  {
    id: "chernigivska-oblast",
    name: "Chernigivska Oblast",
    d: "M679 91L682 91L684 93L682 100L680 102L681 106L686 111L688 111L688 113L686 115L683 114L683 122L674 125L669 131L669 135L673 140L672 144L674 149L674 155L672 154L671 163L666 163L669 169L669 173L664 178L665 181L663 183L665 185L669 185L668 188L670 189L674 187L675 188L673 191L674 199L671 206L673 210L667 228L660 234L653 237L644 237L643 234L639 235L637 233L633 235L631 238L627 238L623 235L623 233L621 233L619 229L620 227L622 227L622 225L619 224L613 218L609 223L603 226L588 226L587 223L583 221L585 217L579 208L568 210L565 208L564 209L563 208L565 202L559 198L560 195L558 191L553 190L552 188L554 178L553 175L555 174L559 164L556 159L556 152L553 150L553 148L556 141L555 140L558 139L559 136L557 135L560 133L559 131L563 127L563 125L565 125L566 122L573 117L571 115L572 113L581 112L584 115L586 115L592 109L596 109L604 111L614 110L616 116L619 114L624 115L633 110L637 100L636 94L644 94L653 99L659 98L663 100L667 95L669 95L675 90z",
    schools: 2,
    students: 170,
  },
  {
    id: "rivnenska-oblast",
    name: "Rivnenska Oblast",
    d: "M346 125L350 125L354 128L366 129L367 132L378 133L389 137L398 135L401 137L401 143L405 144L404 148L416 146L424 148L425 150L423 155L419 157L420 163L416 159L416 167L412 169L413 176L409 180L409 184L402 191L404 196L403 206L405 209L402 217L404 221L402 224L399 223L399 221L397 221L392 226L389 225L384 227L384 229L380 231L377 237L369 245L365 245L358 252L356 248L358 244L345 244L339 250L333 250L327 253L322 251L323 256L321 260L319 260L319 262L311 256L311 250L309 248L311 246L311 242L305 242L311 236L306 230L309 228L307 224L314 224L316 222L315 219L319 218L318 215L323 216L329 212L332 212L339 218L341 214L341 207L345 203L347 203L346 200L348 199L348 197L346 195L352 192L349 186L345 186L345 183L349 182L350 178L348 175L344 174L341 171L339 164L336 163L334 165L332 164L328 167L327 166L327 153L329 148L325 145L325 140L330 133L330 128L332 126L327 125L337 123z",
    schools: 0,
    students: 3,
  },
  {
    id: "zhytomyrska-oblast",
    name: "Zhytomyrska Oblast",
    d: "M454 153L459 149L465 150L467 157L468 159L471 160L471 162L473 160L473 154L478 150L484 149L485 146L488 145L491 146L497 163L501 165L502 164L502 168L498 173L496 173L497 181L501 181L506 186L505 193L503 192L502 195L507 200L506 206L510 208L511 212L506 219L507 228L505 232L503 232L508 232L510 234L511 239L516 244L515 249L517 251L517 255L514 257L514 261L517 268L512 273L504 277L503 282L506 283L506 285L495 292L485 292L483 290L483 286L481 286L484 282L481 278L480 271L476 271L471 277L464 278L462 276L458 276L455 279L432 279L423 277L420 270L418 269L418 263L423 260L423 258L421 257L421 246L419 244L419 246L416 247L406 238L406 236L403 235L406 229L402 224L404 221L402 217L405 211L403 206L404 196L402 192L403 189L407 187L409 184L409 180L413 175L412 169L416 167L416 160L417 159L417 161L420 163L419 158L421 156L423 155L427 157L429 154L429 148L431 146L435 150L442 150L447 144L449 144L454 153z",
    schools: 1,
    students: 126,
  },
  {
    id: "crimea",
    name: "Crimea",
    d: "M756 550L772 576L779 581L789 578L795 569L795 572L800 576L805 574L805 572L808 570L815 569L817 571L818 570L821 572L824 571L826 573L830 573L831 578L825 577L825 580L822 582L821 585L821 591L823 595L815 597L813 599L806 597L802 600L795 600L793 596L786 592L780 592L775 596L775 598L777 599L773 601L774 603L769 602L768 605L763 608L761 613L759 613L757 610L749 612L746 611L734 616L727 628L720 632L716 637L709 639L700 638L695 637L693 632L689 632L683 628L683 626L691 624L689 623L691 620L689 614L690 611L694 608L694 602L690 592L685 588L680 588L678 590L668 581L661 577L654 576L651 579L647 579L642 574L644 570L657 563L658 560L673 552L674 549L678 551L688 544L696 544L697 540L698 541L701 539L695 538L694 520L700 523L702 521L706 522L714 528L715 527L719 530L726 531L734 539L737 535L739 535L746 541L748 541L748 547L755 551z",
    schools: "-",
    students: "-",
  },
];

/**
 * Region Component for the SVG path.
 */
const Region = ({ region, handleHover, handleLeave, isSelected }) => {
  const baseColor = "fill-indigo-700"; //";
  const hoverColor = "fill-yellow-400";
  const transitionClass = "transition-all duration-300 ease-in-out";

  const className = `cursor-pointer ${baseColor} ${transitionClass} ${
    isSelected ? hoverColor : "hover:fill-yellow-400"
  }`;
  const fillStyle = {
    fill: isSelected ? HOVER_REGION_COLOR : BASE_REGION_COLOR,
  };

  return (
    <path
      id={region.id}
      d={region.d}
      className={className}
      stroke="#fff"
      strokeWidth="0.3"
      onMouseEnter={() => handleHover(region)}
      onMouseLeave={handleLeave}
      style={fillStyle}
    />
  );
};

/**
 * Tooltip Component
 */
const MapTooltip = ({ content, position }) => {
  if (!content) return null;

  // Calculate position relative to the viewport.
  // We use fixed and translate to keep it near the cursor without going off-screen.
  const style = {
    top: position.y + 20,
    left: position.x + 20,
    // Add transform to slightly offset from the cursor
    transform: "translate(-50%, 0)",
  };

  return (
    <div
      className="fixed z-50 p-3 bg-gray-800 text-white text-sm rounded-lg shadow-2xl pointer-events-none min-w-[200px]"
      style={style}
    >
      <h4 className="font-bold text-lg text-yellow-300 mb-1">{content.name}</h4>
      <p>
        <span className="font-semibold">
          Educational Institutions Destroyed:
        </span>{" "}
        {content.schools.toLocaleString()}
      </p>
      <p>
        <span className="font-semibold">Educational Institutions Damaged:</span>{" "}
        {content.students.toLocaleString()}
      </p>
    </div>
  );
};

/**
 * Main Map Component
 */
const UkraineMap = () => {
  const [hoveredRegion, setHoveredRegion] = useState(null);
  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });

  // Standard viewBox for Ukraine shape, adjust as needed.
  // The aspect ratio is 1000:600 (or 5:3)
  const viewBox = "90 60 950 600";

  const handleHover = (region) => {
    setHoveredRegion(region);
  };

  const handleLeave = () => {
    setHoveredRegion(null);
  };

  const handleMouseMove = (event) => {
    // Update tooltip position based on the viewport coordinates
    setTooltipPosition({
      x: event.clientX,
      y: event.clientY,
    });
  };

  const getTooltipContent = () => {
    return hoveredRegion
      ? {
          name: hoveredRegion.name,
          schools: hoveredRegion.schools,
          students: hoveredRegion.students,
        }
      : null;
  };

  return (
    <div className="">
      {/* Title */}

      {/* Responsive Map Wrapper 
        - w-full: Takes full width of its parent (the main p-4 container)
        - max-w-[1000px]: Caps the maximum size at 1000px wide
        - mx-auto: Centers the map
      */}
      <div className="w-full max-w-[1000px] mx-auto ">
        <div
          // This container establishes the aspect ratio: pt-[60%] = (600/1000 * 100%)
          className="relative pt-[60%] bg-white"
          onMouseMove={handleMouseMove}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox={viewBox}
            // Absolute positioning ensures the SVG fills the aspect ratio container
            className="absolute top-0 left-0 w-full h-full"
            preserveAspectRatio="xMidYMid meet"
          >
            {UKRAINE_REGIONS_DATA.map((region) => (
              <Region
                key={region.id}
                region={region}
                handleHover={handleHover}
                handleLeave={handleLeave}
                isSelected={hoveredRegion && hoveredRegion.id === region.id}
              />
            ))}
          </svg>

          {/* Legend/Info Panel (Absolute position relative to the aspect ratio container) */}
        </div>
      </div>

      {/* Tooltip */}
      <MapTooltip content={getTooltipContent()} position={tooltipPosition} />
    </div>
  );
};

export default UkraineMap;
